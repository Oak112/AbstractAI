<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Context Compiler - 上下文编译器</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
	    <div class="app-container">
	        <!-- Header -->
	        <header class="header">
	            <div class="logo">
	                <i class="fas fa-layer-group"></i>
	                <span>Context Compiler</span>
	            </div>
	            <div class="header-subtitle">将长对话内容转化为清晰完整的产品开发说明文档</div>
	        </header>

	            <!-- Hero Section: Left content + Right input card -->
	            <section class="hero-split">
	                <!-- Left: Value Proposition -->
	                <div class="hero-content" id="heroContent">
	                <h1 class="hero-title">把一段对话，变成工程师能直接开干的 11 份规格文档</h1>
	                <p class="hero-description">
	                    粘贴聊天记录 / 会议记录 / 任意文本或上传文件，AI 自动提炼决策与约束，整理成一整套结构化规格文档。
	                </p>

	                <!-- 3 Key Benefits -->
	                <ul class="hero-benefits">
	                    <li>
	                        <i class="fas fa-check-circle"></i>
	                        <span>关键决策不遗漏：目标、范围、约束、边界、风险一并梳理清楚</span>
	                    </li>
	                    <li>
	                        <i class="fas fa-check-circle"></i>
	                        <span>对人和 AI 都友好：格式统一、结构清晰，工程师即拿即用</span>
	                    </li>
	                    <li>
	                        <i class="fas fa-check-circle"></i>
	                        <span>支持逐份预览与一键打包下载，方便放入项目仓库</span>
	                    </li>
	                </ul>

	                <!-- 3-Step Process (Minimal) -->
	                <div class="hero-steps">
	                    <div class="step-item">
	                        <div class="step-number">1</div>
	                        <div class="step-text">粘贴 / 上传原始对话与需求</div>
	                    </div>
	                    <div class="step-arrow">→</div>
	                    <div class="step-item">
	                        <div class="step-number">2</div>
	                        <div class="step-text">生成 11 份工程师能直接开干的规格文档</div>
	                    </div>
	                    <div class="step-arrow">→</div>
	                    <div class="step-item">
	                        <div class="step-number">3</div>
	                        <div class="step-text">把上下文 + 文档 + Prompt 丢给编程 AI 实现</div>
	                    </div>
	                </div>

	                <!-- How to use with coding AI -->
	                <div class="hero-ai-usage">
	                    <div class="hero-ai-usage-title">
	                        <i class="fas fa-robot"></i>
	                        <span>整个系统怎么用？</span>
	                    </div>
	                    <p>
	                        把<strong>原始对话上下文</strong>和<strong>这 11 份规格文档</strong>一起放进你的项目仓库，然后在结果页一键复制<strong>实现用 Prompt</strong>，作为指令发给 Cursor / Claude / ChatGPT 等编程 AI，它就能基于这些材料直接开干。
	                    </p>
	                </div>
	            </div>

	            <!-- Right: Input Card (Glass morphism) -->
	            <div class="hero-input-card" id="heroInputCard">
	                <div class="input-card-header">
	                    <h3>开始生成</h3>
	                    <p>粘贴内容或上传文件</p>
	                </div>

	                <div class="input-card-body">
	                    <!-- Project Name -->
	                    <div class="form-group">
	                        <label for="projectName">项目名称</label>
	                        <input type="text" id="projectName" placeholder="输入项目名称..." value="未命名项目">
	                    </div>

	                    <!-- Text Input -->
	                    <div class="form-group">
	                        <label for="contextInput">对话内容</label>
	                        <textarea id="contextInput" placeholder="把你的长对话/会议记录粘贴到这里（任意长度都可以）..."></textarea>
	                        <div class="char-count">
	                            <span id="charCount">0</span> 字符
	                        </div>
	                    </div>

	                    <!-- File Upload -->
	                    <div class="form-group">
	                        <label>或上传文件</label>
	                        <label for="fileInput" class="file-upload-btn">
	                            <i class="fas fa-upload"></i>
	                            <span>选择文件</span>
	                        </label>
	                        <input type="file" id="fileInput" accept=".txt,.md,.doc,.docx" hidden>
	                        <span id="fileName" class="file-name"></span>
	                    </div>

	                    <!-- Model Selection -->
	                    <div class="form-group">
	                        <label>使用模型</label>
	                        <div class="model-toggle-group">
	                            <button type="button" class="model-toggle active" data-model="gpt-5">
	                                <span class="model-name">GPT-5</span>
	                                <span class="model-hint">理解力更强</span>
	                            </button>
	                            <button type="button" class="model-toggle" data-model="gemini-2.5-pro">
	                                <span class="model-name">Gemini 2.5 Pro</span>
	                                <span class="model-hint">响应更快</span>
	                            </button>
	                        </div>
	                    </div>

	                    <!-- CTA Button -->
	                    <button class="generate-btn" id="generateBtn" onclick="generateDocuments()">
	                        <i class="fas fa-magic"></i>
	                        <span>开始生成</span>
	                    </button>

	                    <!-- Time Estimate -->
	                    <p class="time-estimate">通常 1–5 分钟，取决于文本长度与模型</p>
	                </div>
	            </div>
	        </section>

	        <!-- Main Content -->
	        <main class="main-content">
            <!-- Loading Section (hidden by default) -->
            <section class="loading-section" id="loadingSection" style="display: none;">
                <div class="loading-content">
                    <div class="loading-spinner"></div>
                    <h3>正在编译文档...</h3>
                    <p>AI 正在分析您的上下文并生成 11 份规格文档</p>
	                    <p class="loading-tip">通常 1–5 分钟，取决于文本长度与模型</p>
                </div>
            </section>

	            <!-- Results Section -->
	            <section class="results-section" id="resultsSection" style="display: none;">
	                <div class="section-header">
	                    <div class="section-header-main">
	                        <div class="section-header-title-row">
	                            <h2><i class="fas fa-file-alt"></i> 生成的文档</h2>
	                            <div class="results-actions">
	                                <button class="action-btn" onclick="downloadAll()">
	                                    <i class="fas fa-download"></i> 下载全部
	                                </button>
	                                <button class="action-btn secondary" onclick="resetForm()">
	                                    <i class="fas fa-redo"></i> 重新开始
	                                </button>
	                            </div>
	                        </div>
	                        <div class="results-meta">
	                            <p id="generationStatus" class="generation-status">准备生成 11 份文档</p>
	                            <span id="elapsedTimer" class="elapsed-timer"></span>
	                            <div class="generation-progress">
	                                <div class="generation-progress-bar">
	                                    <div id="generationProgressFill" class="generation-progress-fill"></div>
	                                </div>
	                                <span id="generationProgressText" class="generation-progress-text"></span>
	                            </div>
	                        </div>
	                    </div>

	                    <!-- AI Coding Prompt Box (inline on the right) -->
	                    <div class="ai-prompt-box ai-prompt-inline" id="aiPromptBox">
	                        <div class="ai-prompt-header">
	                            <div class="ai-prompt-title">
	                                <i class="fas fa-robot"></i>
	                                <span>下一步：让 AI 帮你实现</span>
	                            </div>
	                            <button class="copy-prompt-btn" onclick="copyAiPrompt()">
	                                <i class="fas fa-copy"></i> 一键复制
	                            </button>
	                        </div>
	                        <div class="ai-prompt-guide">
	                            <p><strong>使用方法：</strong>把<u>原始对话上下文</u>和<u>生成的 11 份文档</u>一起放进你的项目仓库，然后把<u>下方 Prompt</u> 作为指令发给 Cursor / Claude / ChatGPT 等编程 AI，它会自动理解需求并完成实现。</p>
	                        </div>
	                        <textarea id="aiPromptText" class="ai-prompt-textarea" readonly>从现在开始，请你在不向我提问、不等我确认的前提下，把当前项目从理解到实现完整做完。

第一步，先默默完成理解工作（不用逐条复述给我听）：
- 浏览当前工作区的所有文件和子目录，包括文档、源码、脚本、配置、原始对话/会议记录/需求说明等，尽量做到不遗漏。
- 搞清楚每个文件、每类文档的用途，它们之间的关系，以及它们共同描述的这个项目到底要做什么。
- 如有多份规格文档、设计文档和原始对话，请结合起来理解真实需求和约束，而不是只看其中一份。
- 在环境允许和安全前提下，可以自行查阅公开资料做补充，形成你自己的整体方案。

第二步，在你自己已经搞清楚之后，自动从头到尾执行，不要停在"计划"层面：
- 可以先用极简的几句话概括一下你理解的目标和大致路线，但写完就立刻开始动手，不要等我"同意"。
- 按你认为合理的顺序，逐步创建/修改文件，搭建项目结构，实现前后端、数据层、模型调用等所有必要部分。
- 在需要依赖或隔离环境时，优先使用虚拟环境或容器（如 venv 等），保持可复现和不污染全局环境。
- 不要只给高层方案或 TODO 列表，而是直接给出具体的代码、配置、命令和运行方式。

第三步，持续自检和完善，直到项目真正可用为止：
- 参考现有文档中的需求、边界情况、验收标准等内容，为关键功能设计并执行合理的测试（可以是自动化测试，也可以是明确的手动测试步骤）。
- 发现冲突或不一致时，自己先消化：尽量协调代码和文档，让它们相互匹配，必要时在文档或注释中写明你的处理方式和假设。
- 遇到信息缺失时，在合理范围内自己做明确的假设并记录下来，继续往前推进，不要停下来问我"要不要这样做"。

只有在遇到硬性限制、权限问题或完全无法继续推进的客观阻碍时，才向我简要说明情况；在其他情况下，请一直按照你的最佳判断，把项目实现、整理和验证到你认为"没有明显问题、符合所有已知要求"的状态再停下来。</textarea>
	                    </div>
	                </div>

	                <div class="documents-grid" id="documentsGrid"></div>
            </section>
        </main>

        <!-- Document Modal -->
        <div class="modal" id="documentModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalTitle"></h3>
                    <div class="modal-actions">
                        <button class="modal-btn" onclick="copyDocument()">
                            <i class="fas fa-copy"></i> 复制
                        </button>
                        <button class="modal-btn" onclick="downloadDocument()">
                            <i class="fas fa-download"></i> 下载
                        </button>
                        <button class="modal-close" onclick="closeModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="modal-body">
                    <pre id="modalContent"></pre>
                </div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div class="toast" id="toast"></div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>

